---
title: MySQL索引总结
sidebar: [grid, toc, tags] # 放置任何你想要显示的侧边栏部件
categories: [数据库, mysql]
date: 2019-12-25
tags:
- 数据库
- mysql
- MySQL索引
---

MySQL索引包含两部分内容，一部分是MySQL索引本身，一部分是B树和B+树。

对于MySQL索引本身需要了解基本的概念和原理，知道有哪些索引？怎么建立索引？什么时候应该建索引，索引建立在什么字段上。

##### 1. MySQL索引

- 什么是索引

  索引是一种用于快速查询和排好序的数据结构

- 索引的分类（分类一定是基于某种标准来分的）

  - 从数据结构的角度
    - B+树索引
    - hash索引
    - 全文索引
  - 从物理存储角度
    - 聚集索引
    - 非聚集索引
  - 从逻辑角度
    - 主键索引
    - 单列索引
    - 符合索引
    - 唯一索引或非唯一索引
    - 空间索引

- 什么是聚集索引，什么是非聚集索引

  

- 什么时候需要建立索引

  1. 主键自动建立唯一索引
  2. 频繁作为查询条件的字段应该创建索引
  3. 查询中与其他表管理的字段，外键关系建立索引
  4. 查询中排序的字段建立索引
  5. 查询中统计或者分组字段

- 说明时候不需要建立索引

  - 表记录太少
  - 经常增删改的表
  - where条件用不到的字段
  - 数据区分度比较小的字段、

##### 2. B树和B+树的概念

- 什么是B+树

  B+树是一个多路的平衡搜索树，B+树的结点由有序的元素和指针组成，指针的个数称为B+树的阶，根节点至少有一个元素，非根节点元素的范围为m/2<=k<=m-1,B+树有两种类型的节点，内部节点和叶子节点，内部节点不存储数据，只存储所有，数据都存储在叶子节点。内部节点的key是按顺序存放的，元素的左子树的key都小于它，右子树的key都大于它，叶子结点中的记录也按照key的大小排列。每个叶子结点都存有相邻叶子结点的指针，叶子结点本身依关键字的大小自小而大顺序链接。父节点存有右孩子的第一个元素的索引。

  

- 什么是B树

  B树也称B-树,它是一颗多路平衡查找树。二叉树我想大家都不陌生，其实，B树和后面讲到的B+树也是从最简单的二叉树变换而来的

  - 每个节点最多有m-1个**关键字**（可以存有的键值对）。

  - 根节点最少可以只有1个**关键字**。

  - 非根节点至少有m/2个**关键字**。

  - 每个节点中的关键字都按照从小到大的顺序排列，每个关键字的左子树中的所有关键字都小于它，而右子树中的所有关键字都大于它。

  - 所有叶子节点都位于同一层，或者说根节点到每个叶子节点的长度都相同。

  - 每个节点都存有索引和数据，也就是对应的key和value。

##### 3. 对比以下B+树比B树的优点（为什么用B+树作为索引而不是B树）

  - 单一节点存储的元素更多，使得查询的IO次数更少，所以也就使得它更适合做为数据库MySQL的底层数据结构了。
  - 所有的查询都要查找到叶子节点，查询性能是稳定的，而B树，每个节点都可以查找到数据，所以不稳定。
  - 所有的叶子节点形成了一个有序链表，更加便于查找。



